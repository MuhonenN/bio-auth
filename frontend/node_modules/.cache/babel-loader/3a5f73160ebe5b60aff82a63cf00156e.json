{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { PassageUser } from '@passageidentity/passage-auth/passage-user';\nexport function useCurrentUser() {\n  _s();\n\n  const [result, setResult] = useState({\n    isLoading: true,\n    isAuthorized: false,\n    username: ''\n  });\n  useEffect(() => {\n    let cancelRequest = false;\n    new PassageUser().userInfo().then(userInfo => {\n      if (cancelRequest) return;\n\n      if (userInfo === undefined) {\n        setResult({\n          isLoading: false,\n          isAuthorized: false,\n          username: ''\n        });\n        return;\n      }\n\n      setResult({\n        isLoading: false,\n        isAuthorized: true,\n        username: userInfo.email ? userInfo.email : userInfo.phone\n      });\n    });\n    return () => {\n      cancelRequest = true;\n    };\n  }, []);\n  return result;\n}\n\n_s(useCurrentUser, \"zTBxXYFYwRZlweLs8isOMqMnGW0=\");","map":{"version":3,"sources":["G:/repos/Full Stack/bio-auth/frontend/src/hooks/useCurrentUser.js"],"names":["useState","useEffect","PassageUser","useCurrentUser","result","setResult","isLoading","isAuthorized","username","cancelRequest","userInfo","then","undefined","email","phone"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,WAAT,QAA4B,4CAA5B;AAEA,OAAO,SAASC,cAAT,GAA0B;AAAA;;AAC7B,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBL,QAAQ,CAAC;AACjCM,IAAAA,SAAS,EAAE,IADsB;AAEjCC,IAAAA,YAAY,EAAE,KAFmB;AAGjCC,IAAAA,QAAQ,EAAE;AAHuB,GAAD,CAApC;AAMAP,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIQ,aAAa,GAAG,KAApB;AACA,QAAIP,WAAJ,GAAkBQ,QAAlB,GAA6BC,IAA7B,CAAmCD,QAAD,IAAc;AAC5C,UAAID,aAAJ,EAAmB;;AAEnB,UAAIC,QAAQ,KAAKE,SAAjB,EAA4B;AACxBP,QAAAA,SAAS,CAAC;AACNC,UAAAA,SAAS,EAAE,KADL;AAENC,UAAAA,YAAY,EAAE,KAFR;AAGNC,UAAAA,QAAQ,EAAE;AAHJ,SAAD,CAAT;AAKA;AACH;;AACDH,MAAAA,SAAS,CAAC;AACNC,QAAAA,SAAS,EAAE,KADL;AAENC,QAAAA,YAAY,EAAE,IAFR;AAGNC,QAAAA,QAAQ,EAAEE,QAAQ,CAACG,KAAT,GAAiBH,QAAQ,CAACG,KAA1B,GAAkCH,QAAQ,CAACI;AAH/C,OAAD,CAAT;AAKH,KAhBD;AAiBA,WAAO,MAAM;AACTL,MAAAA,aAAa,GAAG,IAAhB;AACH,KAFD;AAGH,GAtBQ,EAsBN,EAtBM,CAAT;AAwBA,SAAOL,MAAP;AACH;;GAhCeD,c","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { PassageUser } from '@passageidentity/passage-auth/passage-user';\r\n\r\nexport function useCurrentUser() {\r\n    const [result, setResult] = useState({\r\n        isLoading: true,\r\n        isAuthorized: false,\r\n        username: '',\r\n    });\r\n\r\n    useEffect(() => {\r\n        let cancelRequest = false;\r\n        new PassageUser().userInfo().then((userInfo) => {\r\n            if (cancelRequest) return;\r\n\r\n            if (userInfo === undefined) {\r\n                setResult({\r\n                    isLoading: false,\r\n                    isAuthorized: false,\r\n                    username: '',\r\n                });\r\n                return;\r\n            }\r\n            setResult({\r\n                isLoading: false,\r\n                isAuthorized: true,\r\n                username: userInfo.email ? userInfo.email : userInfo.phone,\r\n            });\r\n        });\r\n        return () => {\r\n            cancelRequest = true;\r\n        };\r\n    }, []);\r\n\r\n    return result;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}